<div class="container mt-4">
  <h2>Backward Chaining Diagnostics</h2>

  <!-- MACHINE TABLE -->
  <table class="table table-hover mt-3" *ngIf="machines.length > 0">
    <thead>
      <tr>
        <th>Name</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let m of machines">
        <td>{{ m.name }}</td>
        <td>{{ m.status }}</td>
        <td>
          <button class="btn btn-sm btn-outline-primary" (click)="openBackwardDialog(m)">
            Diagnose (Backward)
          </button>
        </td>
      </tr>
    </tbody>
  </table>

    <!-- RESULTS SECTION -->
    <div *ngIf="results.length > 0" class="mt-4">
    <h4>Results:</h4>
    <table class="table table-striped table-bordered mt-2">
        <thead class="table-light">
        <tr>
            <th>Machine</th>
            <th>Hypothesis</th>
            <th>Proven</th>
            <th>Status</th>
            <th>Recommendations</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let r of results">
            <td>{{ r.machineName }}</td>
            <td>{{ r.hypothesis }}</td>
            <td>
            <span *ngIf="r.proven" class="text-success fw-bold">✅ Yes</span>
            <span *ngIf="!r.proven" class="text-danger fw-bold">❌ No</span>
            </td>
            <td>{{ r.status }}</td>
            <td>{{ r.recommendations }}</td>
        </tr>
        </tbody>
    </table>
    </div>


  <!-- LOGS SECTION (place after results) -->
    <div *ngIf="logs.length > 0" class="mt-4">
        <h4>Detailed Reasoning Log:</h4>
        <pre class="bg-dark text-light p-3 rounded shadow-sm"
            style="max-height: 400px; overflow-y: auto; white-space: pre-wrap;">
            {{ logs.join('\n') }}
        </pre>
    </div>

</div>
